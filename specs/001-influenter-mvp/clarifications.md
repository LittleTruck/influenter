# Influenter MVP - 需求澄清文件

> **目的**：釐清功能規格中的模糊需求，確保開發方向明確  
> **最後更新**：2025-10-07

---

## ❓ 功能範圍問題

### Q1: 是否需要支援多個 Gmail 帳號？

**建議答案：❌ MVP 不支援**

**理由**：
- **簡化開發**：多帳號支援會增加資料模型複雜度（需要 account 層級管理）
- **目標使用者特性**：創作者通常使用單一商務 Gmail 帳號處理合作
- **MVP 原則**：先驗證核心價值（AI 分析 + 案件管理），再考慮擴展功能

**實作決策**：
- 一個使用者 = 一個 Gmail 帳號
- 資料模型設計時預留擴展空間（使用 `gmail_account_id` 欄位）
- 未來可升級為多帳號（作為付費功能）

**影響範圍**：
- 資料模型更簡單
- UI 不需要帳號切換功能
- 降低初期開發複雜度

---

### Q2: AI 回覆生成後，是否需要支援「學習使用者風格」？

**建議答案：⚠️ MVP 階段記錄資料，暫不實作個性化**

**理由**：
- **技術複雜度高**：需要 fine-tuning 或 RAG（Retrieval-Augmented Generation）
- **資料需求**：需要累積足夠的使用者回覆資料
- **成本考量**：fine-tuning 成本較高
- **MVP 驗證重點**：先確認「AI 生成回覆」這個功能本身是否有價值

**實作決策**：
- ✅ **記錄使用者修改**：儲存「AI 生成版本」vs.「使用者最終版本」
- ✅ **基礎語氣設定**：提供 3-5 種預設風格（專業、親切、簡潔等）
- ❌ **暫不實作**：不做個人化 fine-tuning
- 🔮 **未來規劃**：累積資料後，Phase 2 可實作 RAG 或 few-shot learning

**資料庫設計**：
```sql
-- 記錄回覆歷史，供未來分析使用
CREATE TABLE reply_history (
  id UUID PRIMARY KEY,
  case_id UUID,
  ai_generated_content TEXT,      -- AI 生成的內容
  user_final_content TEXT,         -- 使用者最終版本
  user_modifications JSONB,        -- 記錄修改類型（語氣、長度等）
  created_at TIMESTAMP
);
```

**影響範圍**：
- 資料結構預留擴展空間
- UI 提供簡單的語氣選擇下拉選單
- 降低 MVP 開發時程

---

### Q3: 案件是否需要支援「協作」功能（多人管理同一案件）？

**建議答案：❌ MVP 不支援**

**理由**：
- **目標使用者定位**：初期針對「一人團隊」創作者
- **權限系統複雜**：需要實作 RBAC（Role-Based Access Control）
- **UI 複雜度**：需要成員管理、權限設定介面
- **驗證優先級**：先驗證個人使用場景的價值

**實作決策**：
- 一個案件 = 一個擁有者（創作者本人）
- 資料模型預留 `created_by` 和 `assigned_to` 欄位（未來擴展用）
- 可考慮在 Phase 2 推出「團隊版」作為進階功能

**未來擴展考量**：
- 經紀人 + 創作者協作
- 助理協助管理案件
- 團隊共用報價方案

**影響範圍**：
- 簡化權限管理（單一使用者）
- 不需要成員邀請功能
- 加快 MVP 上線時程

---

## 🔧 技術細節問題

### Q4: Gmail 同步頻率是否可以由使用者自訂？

**建議答案：⚠️ MVP 固定 5 分鐘，未來開放自訂**

**理由**：
- **API 配額管理**：需要控制整體 API 呼叫量
- **成本可控**：避免使用者設定過於頻繁的同步
- **功能優先級**：同步頻率不是核心痛點
- **技術實作**：固定頻率的 cron job 實作較簡單

**實作決策**：
- **固定頻率**：每 5 分鐘執行一次背景任務
- **手動同步**：提供「立即同步」按鈕（有冷卻時間，例如 1 分鐘）
- **智慧同步**：只同步「最近 30 天」的未讀信件（首次）+ 增量同步（後續）

**Gmail API 配額考量**：
- 每日配額：1,000,000,000 單位
- `users.messages.list`：約 5 單位/次
- `users.messages.get`：約 5 單位/次
- 假設 1000 使用者，每人每次同步 10 封信件：
  - 1000 users × 288 syncs/day × (5 + 10×5) = 15,840,000 單位/天
  - 遠低於配額上限 ✅

**未來擴展**：
- 提供「即時同步」（webhook / push notifications）作為付費功能
- 允許使用者自訂同步頻率（1分鐘 / 5分鐘 / 15分鐘 / 30分鐘）

**影響範圍**：
- 背景任務系統設計（使用 cron 或 Asynq）
- UI 顯示「上次同步時間」與「同步中」狀態
- 簡化設定頁面

---

### Q5: OpenAI API 費用由誰承擔？使用者自己的 API Key 還是平台統一？

**建議答案：✅ 使用者提供自己的 API Key（MVP 階段）**

**理由**：
- **降低平台成本**：MVP 階段無需承擔 AI API 費用
- **靈活性**：使用者可使用 OpenAI、Azure OpenAI 或其他相容 API
- **避免濫用**：不會有使用者過度使用 API 的問題
- **台灣創作者特性**：目標使用者多為科技接受度較高的族群，取得 API Key 不困難

**實作決策**：
- 使用者在「設定」頁面輸入 OpenAI API Key
- API Key 加密儲存在資料庫（使用 AES-256）
- 提供「API Key 設定教學」文件與影片
- 顯示「預估費用」資訊（例如：每封信件分析約 $0.01 USD）

**API Key 管理**：
```typescript
// 前端輸入
interface AISettings {
  apiKey: string;          // 使用者輸入，傳送前端加密
  apiEndpoint?: string;    // 可選，預設 OpenAI，也可用 Azure
  model: string;           // 預設 gpt-4o-mini（便宜），可選 gpt-4
}

// 後端儲存（加密）
type EncryptedAPIKey = string;  // AES-256 加密後的字串
```

**未來擴展考量**：
- Phase 2 可提供「平台統一 API」作為付費方案
- 提供用量儀表板（顯示 token 消耗）
- 支援多種 AI 提供商（Claude、Gemini 等）

**影響範圍**：
- 設定頁面需要 API Key 輸入欄位
- 後端需要實作加密/解密邏輯
- 需要撰寫使用者教學文件

---

### Q6: 資料保留政策？郵件與案件資料保留多久？

**建議答案：✅ 預設永久保留，提供手動刪除與匯出功能**

**理由**：
- **使用者期望**：創作者希望保留歷史案件作為參考
- **資料價值**：歷史資料對分析收入趨勢有價值
- **法規遵循**：提供資料匯出與刪除功能符合 GDPR 精神
- **儲存成本**：文字資料儲存成本相對低廉

**實作決策**：
1. **預設行為**：所有資料永久保留（除非使用者刪除）
2. **軟刪除**：案件刪除時使用 soft delete（`deleted_at` 欄位）
3. **資料匯出**：提供 JSON / CSV 格式匯出功能
4. **永久刪除**：提供「永久刪除帳號與所有資料」功能

**資料保留細節**：
- **郵件同步資料**：保留郵件基本資訊（主旨、寄件者、時間、部分內文）
- **不儲存附件**：僅記錄附件名稱與類型，不下載實體檔案
- **AI 分析結果**：永久保留（供改善模型使用）
- **已刪除案件**：軟刪除 30 天後可選擇永久刪除

**隱私政策說明**：
```markdown
## 資料保留政策

- ✅ 您的郵件與案件資料會永久保留，除非您主動刪除
- ✅ 刪除的案件會保留 30 天（可恢復），之後可永久刪除
- ✅ 您可以隨時匯出所有資料（JSON / CSV 格式）
- ✅ 刪除帳號時，所有資料將在 30 天內永久清除
- ❌ 我們不會販售或分享您的資料給第三方
```

**資料庫設計**：
```sql
-- 軟刪除設計
CREATE TABLE cases (
  id UUID PRIMARY KEY,
  -- ... 其他欄位
  deleted_at TIMESTAMP NULL,
  created_at TIMESTAMP,
  updated_at TIMESTAMP
);

-- 查詢時自動過濾已刪除
-- SELECT * FROM cases WHERE deleted_at IS NULL;
```

**影響範圍**：
- 資料模型需要 `deleted_at` 欄位
- 提供「回收桶」功能（查看 30 天內刪除的案件）
- 撰寫隱私政策文件
- 實作資料匯出功能

---

## 🎨 UI/UX 問題

### Q7: 是否需要手機 App 或 RWD 即可？

**建議答案：✅ RWD 響應式網頁即可（MVP 階段）**

**理由**：
- **開發成本**：原生 App 需要 iOS + Android 雙平台開發
- **維護成本**：RWD 只需維護一套程式碼
- **使用情境**：創作者處理合作案件多在電腦前進行（撰寫回覆、查看合約）
- **Nuxt 3 優勢**：天生支援 RWD，Vuetify 3 元件響應式設計完善

**實作決策**：
- 使用 **Mobile-First** 設計原則
- 支援螢幕尺寸：手機（375px+）、平板（768px+）、桌機（1024px+）
- 關鍵功能在手機上可完整操作（查看案件、快速回覆、接收通知）
- 使用 PWA（Progressive Web App）提升手機體驗

**PWA 功能**：
- 可安裝到手機主畫面（像 App 一樣）
- 支援離線查看已載入的資料
- 推送通知（瀏覽器通知）
- 快取策略優化載入速度

**未來擴展考量**：
- 如果 MVP 驗證成功，且使用者強烈要求，可開發原生 App
- 可使用 Capacitor / React Native 將 Web 打包成 App（降低開發成本）

**影響範圍**：
- UI 設計需要考慮多種螢幕尺寸
- 測試需涵蓋手機、平板、桌機
- 實作 PWA manifest 與 service worker
- 不需要學習原生 App 開發

---

### Q8: 是否需要暗色模式？

**建議答案：✅ 建議實作（Vuetify 3 內建支援）**

**理由**：
- **使用者期望**：現代應用程式標配功能
- **實作成本低**：Vuetify 3 內建暗色模式支援，幾乎零額外成本
- **使用情境**：創作者可能在晚上處理郵件，暗色模式降低眼睛疲勞
- **品牌形象**：展現專業與現代化

**實作決策**：
- 預設跟隨系統設定（`prefers-color-scheme`）
- 提供手動切換按鈕（導覽列）
- 使用 Vuetify 3 的主題系統
- 記住使用者偏好（localStorage）

**技術實作**：
```typescript
// Vuetify 3 主題設定
import { createVuetify } from 'vuetify'

const vuetify = createVuetify({
  theme: {
    defaultTheme: 'light',
    themes: {
      light: {
        colors: {
          primary: '#1976D2',
          secondary: '#424242',
          // ... 其他顏色
        }
      },
      dark: {
        colors: {
          primary: '#2196F3',
          secondary: '#616161',
          // ... 其他顏色
        }
      }
    }
  }
})

// 切換主題
const toggleTheme = () => {
  vuetify.theme.global.name = 
    vuetify.theme.global.name === 'light' ? 'dark' : 'light'
  localStorage.setItem('theme', vuetify.theme.global.name)
}
```

**影響範圍**：
- UI 元件需要測試暗色模式顯示
- 自訂樣式需要適配兩種主題
- 導覽列增加主題切換按鈕
- 實作成本極低（1-2 小時）

---

## 📊 釐清結果總結

### ✅ 確定要做（MVP 範圍）
1. **單一 Gmail 帳號**支援
2. **基礎 AI 回覆生成**（無個性化學習）
3. **單人使用**（無協作功能）
4. **固定 5 分鐘同步**（+ 手動同步按鈕）
5. **使用者自己提供 OpenAI API Key**
6. **資料永久保留** + 手動刪除 + 匯出功能
7. **RWD 響應式網頁**（支援手機、平板、桌機）
8. **暗色模式**（Vuetify 3 內建）

### ⚠️ 記錄但暫不實作（Phase 2+）
1. 多 Gmail 帳號支援
2. AI 個性化學習（風格 fine-tuning）
3. 協作功能（多人管理案件）
4. 自訂同步頻率
5. 平台統一 API Key（降低使用者門檻）
6. 原生手機 App

### ❌ 明確不做
1. 社群媒體排程功能
2. 金流處理
3. 多語言版本（僅繁體中文）

---

## 📝 規格文件更新

基於以上釐清結果，需要更新 `spec.md`：

### 需更新的章節
1. **功能模組 1（認證）**：明確單一 Gmail 帳號
2. **功能模組 2（Gmail 同步）**：固定 5 分鐘 + 手動同步
3. **功能模組 5（回覆生成）**：基礎語氣選擇，無個性化
4. **技術架構**：加入 PWA、暗色模式說明
5. **資料安全**：API Key 使用者自行提供
6. **不做什麼**：補充完整清單

### 移除的 Clarifications
- 所有 8 個問題已解答，可從 spec.md 移除並標記為「已釐清」

---

## ✅ 驗收檢查

- [x] 所有功能範圍問題已回答
- [x] 所有技術細節問題已回答
- [x] 所有 UI/UX 問題已回答
- [x] 決策理由充分且符合專案憲章
- [x] MVP 範圍明確定義
- [x] 技術實作方向清晰
- [x] 資料模型設計考量完整
- [x] 未來擴展路徑規劃清楚

---

**下一步**：更新 `spec.md`，移除 Clarifications 區段，進入技術研究階段。

