# Influenter MVP 功能規格

> **專案代碼**: 001-influenter-mvp  
> **版本**: 1.0.0  
> **最後更新**: 2025-10-07  
> **狀態**: 需求釐清中

---

## 📋 執行摘要

### 產品名稱
Influenter - AI 驅動的創作者合作案件管理系統

### 目標使用者
台灣的內容創作者，包括：
- KOL（Key Opinion Leader）
- 自媒體經營者
- YouTube 創作者
- Instagram / TikTok 網紅
- 部落客與 Podcaster
- 自由工作者（攝影師、設計師等）

### 核心問題
創作者在管理合作案件時面臨的痛點：
1. **信件混亂**：品牌邀約、合約討論、交稿通知散落在 Gmail 中
2. **手動分類耗時**：需要人工判斷郵件類型與重要性
3. **忘記回覆**：重要合作機會因疏忽而流失
4. **時程管理困難**：多個案件同時進行，容易遺漏截止日期
5. **回覆重複**：類似的回覆內容需要重複撰寫
6. **資訊難以追蹤**：品牌資訊、報價、合約條款散落各處

### 解決方案
一套整合 Gmail、AI 與專案管理的系統，提供：
- **自動郵件同步**：定期抓取 Gmail 信件
- **AI 智慧分類**：自動識別合作邀約、合約、交稿等類型
- **資訊自動抽取**：品牌名稱、報價金額、重要日期等
- **案件專案化管理**：將零散信件整合成可追蹤的案件
- **AI 協助回覆**：根據情境生成回覆草稿
- **時程自動提醒**：重要日期與任務提醒

---

## 🎯 產品目標

### 業務目標
1. **提升效率**：減少 60% 郵件分類與整理時間
2. **降低遺漏**：重要合作機會回覆率提升至 95%+
3. **標準化流程**：建立可重複的案件處理流程
4. **資料洞察**：了解自己的合作類型與收入組成

### 使用者目標
1. **省時**：不需手動整理信件與建立案件
2. **安心**：系統自動提醒，不會錯過重要事項
3. **專業**：快速生成專業的回覆內容
4. **清晰**：一目了然所有進行中的案件狀態

### 成功指標
- **使用者留存率** > 70%（月留存）
- **AI 分類準確率** > 85%
- **AI 回覆採用率** > 60%
- **使用者滿意度** NPS > 40
- **平均處理案件數** > 5 件/週

---

## 👥 使用者角色與場景

### 主要角色：創作者（Alice）
**背景**：
- 25 歲 YouTuber，訂閱數 15 萬
- 每週收到 5-10 封合作邀約
- 同時經營 Instagram（8 萬粉絲）
- 一人團隊，需要自己處理所有商務溝通

**痛點**：
- Gmail 信箱爆滿，難以追蹤哪些品牌已回覆
- 經常忘記合約中的交稿日期
- 每次回覆都要重新寫類似的內容
- 不知道自己一個月接了多少案子、總收入多少

**期望**：
- 打開系統就能看到所有進行中的案件
- 系統自動提醒我該做什麼
- 快速生成回覆，稍作修改就能寄出
- 清楚知道每個案件的狀態與時程

### 使用場景

#### 場景 1：收到新的合作邀約
1. 品牌 A 寄信到 Alice 的 Gmail
2. Influenter 自動同步信件
3. AI 判斷這是「合作邀約」並抽取資訊：
   - 品牌：某美妝品牌
   - 類型：業配影片
   - 預算：NT$ 30,000
   - 期望交期：2 週內
4. 系統自動建立「待確認」狀態的案件
5. Alice 收到通知，點開案件查看
6. 系統提供 AI 生成的回覆草稿（詢問更多細節）
7. Alice 微調後點擊「寄送」

#### 場景 2：案件進行中的時程管理
1. Alice 與品牌 A 確認合作，案件狀態變更為「進行中」
2. 系統根據合約自動建立時程：
   - D+3：腳本提交
   - D+7：影片初剪
   - D+10：正式上線
   - D+15：數據回報
3. 每個時程節點前 1 天，系統發送提醒
4. 當到達「影片初剪」日期時，AI 協助生成寄給品牌的更新郵件

#### 場景 3：月底案件回顧
1. Alice 打開「報表」頁面
2. 看到本月完成 8 個案件，總收入 NT$ 180,000
3. 查看各類型案件分布（影片 5 件、貼文 3 件）
4. 發現某類型案件報酬較高，未來可以調整接案策略

---

## 🔧 功能模組詳述

### 模組 1：使用者認證與設定

#### 功能點
- [ ] Google OAuth 2.0 登入
- [ ] 使用者基本資料設定（名稱、頭像）
- [ ] Gmail 授權管理（查看、撤銷）
- [ ] OpenAI API Key 設定

#### 使用者故事
> **作為創作者**，我希望能用 Google 帳號快速登入，這樣我不需要記住另一組密碼。

#### 驗收標準
- 點擊「使用 Google 登入」後，跳轉至 Google 授權頁面
- 授權成功後，系統記錄 Gmail access token（加密儲存）
- 使用者可以在設定頁面看到已授權的 Gmail 帳號
- 使用者可以撤銷授權，系統刪除相關 tokens

---

### 模組 2：Gmail 整合與同步

#### 功能點
- [ ] 定期同步 Gmail 信件（每 5 分鐘）
- [ ] 支援手動觸發同步
- [ ] 只同步未讀信件或特定時間範圍內的信件
- [ ] 儲存郵件基本資訊（寄件者、主旨、內文、時間）
- [ ] 支援郵件標籤與篩選

#### 使用者故事
> **作為創作者**，我希望系統能自動同步我的 Gmail 信件，這樣我不需要手動匯入。

#### 技術細節
- 使用 Gmail API `users.messages.list` 與 `users.messages.get`
- 實作增量同步（只抓取新信件）
- 考慮 Gmail API 配額限制（每日 1,000,000,000 配額單位）
- 錯誤處理：token 過期、API 限流、網路錯誤

#### 驗收標準
- 首次同步後，系統顯示最近 30 天的信件
- 後續每 5 分鐘自動檢查新信件
- 同步狀態顯示在 UI 上（同步中、上次同步時間）
- 當 token 過期時，提示使用者重新授權

---

### 模組 3：AI 郵件分析與分類

#### 功能點
- [ ] 郵件語義分類（合作邀約、合約討論、交稿通知、完結感謝）
- [ ] 資訊抽取（品牌名稱、報價金額、日期、合作類型）
- [ ] AI 信心指標（0-100%）
- [ ] 使用者修正機制（記錄修正結果以改善模型）

#### 使用者故事
> **作為創作者**，我希望系統能自動識別哪些信件是合作邀約，這樣我可以優先處理。

#### AI 分類類型
1. **合作邀約**：品牌主動詢問合作意願
2. **合約討論**：關於報價、條款、細節的往來
3. **執行通知**：確認合作、開始執行
4. **交稿相關**：腳本、初稿、正式稿相關
5. **結案感謝**：案件完成、款項確認
6. **其他**：不屬於以上分類

#### 資訊抽取欄位
- **品牌名稱**：合作品牌或公司名稱
- **報價金額**：提及的金額（NT$）
- **重要日期**：截止日期、交稿日、上線日等
- **合作類型**：業配影片、開箱文、限動貼文等
- **聯絡人**：品牌窗口姓名與職稱

#### 技術細節
- 使用 OpenAI GPT-4 API
- 設計專用的 system prompt（針對台灣創作者情境）
- 結構化輸出（JSON schema）
- 實作 retry 機制與錯誤處理
- 快取機制減少重複 API 呼叫

#### 驗收標準
- 郵件分類準確率 > 85%（基於測試集）
- 品牌名稱抽取準確率 > 90%
- 金額抽取準確率 > 80%
- API 呼叫失敗時有明確錯誤訊息
- 使用者可以修正 AI 判斷結果

---

### 模組 4：案件管理

#### 功能點
- [ ] 案件 CRUD（新增、查詢、修改、刪除）
- [ ] 案件狀態管理（待確認、進行中、已完成、已取消）
- [ ] 案件與郵件的關聯
- [ ] 手動建立案件（不透過 AI）
- [ ] 案件搜尋與篩選
- [ ] 案件詳情頁（顯示所有相關資訊與郵件）

#### 使用者故事
> **作為創作者**，我希望能看到所有進行中的案件，並了解每個案件的狀態。

#### 案件狀態流程
```
待確認 → 進行中 → 已完成
   ↓         ↓
已取消    已取消
```

#### 案件欄位
- **案件名稱**：自動生成或使用者自訂
- **品牌名稱**：必填
- **合作類型**：影片、貼文、Reels、限動等
- **報價金額**：預估或確定金額
- **狀態**：待確認 / 進行中 / 已完成 / 已取消
- **重要日期**：合約簽署日、交稿日、上線日等
- **備註**：使用者自由輸入
- **關聯郵件**：連結到相關的 Gmail 信件
- **建立時間 / 更新時間**

#### 驗收標準
- 可以手動建立新案件
- AI 分析後自動建立的案件會顯示「待確認」標籤
- 案件列表支援按狀態篩選
- 案件詳情頁顯示所有相關郵件（時間排序）
- 可以編輯案件資訊
- 刪除案件時有二次確認

---

### 模組 5：回覆生成與管理

#### 功能點
- [ ] AI 生成回覆草稿
- [ ] 回覆模板管理（常用回覆）
- [ ] 回覆歷史記錄
- [ ] 使用者修改後的回覆記錄
- [ ] 一鍵寄送（透過 Gmail API）

#### 使用者故事
> **作為創作者**，我希望系統能協助我生成專業的回覆，這樣我不需要每次都從頭寫。

#### 回覆生成情境
1. **初次邀約回覆**：表達興趣、詢問更多細節
2. **報價回覆**：提供報價與合作方案
3. **確認合作**：確認細節、約定時程
4. **交稿通知**：提供成品連結或檔案
5. **結案感謝**：感謝合作、期待下次

#### 技術細節
- 使用 OpenAI GPT-4 API
- System prompt 包含使用者設定的語氣風格（專業、親切等）
- 支援使用者補充額外資訊（例如：「提到我最近很忙」）
- 生成後允許使用者編輯
- 透過 Gmail API 的 `users.messages.send` 寄送

#### 驗收標準
- 點擊「生成回覆」後，3 秒內顯示草稿
- 回覆內容符合情境與語氣
- 使用者可以自由編輯生成的內容
- 點擊「寄送」後，郵件成功發送且顯示在案件歷史中
- 寄送失敗時有錯誤提示

---

### 模組 6：合作方案與報價模板

#### 功能點
- [ ] 建立多個合作方案（方案名稱、價格、說明）
- [ ] 方案項目組合（影片製作、平台授權等）
- [ ] 預設注意事項與條款
- [ ] 在回覆中快速插入方案資訊

#### 使用者故事
> **作為創作者**，我希望能建立我的標準報價方案，這樣回覆品牌時可以快速引用。

#### 方案範例
**方案：YouTube 業配影片**
- 價格：NT$ 30,000
- 包含項目：
  - 60-90 秒業配段落
  - 影片說明欄連結
  - 保留影片 30 天
- 注意事項：
  - 需提前 2 週預約檔期
  - 腳本需經過審核
  - 不接受違反社群規範的產品

#### 驗收標準
- 可以建立、編輯、刪除方案
- 方案包含名稱、價格、說明、項目列表
- 在生成回覆時，可以選擇插入特定方案
- 方案資訊會自動格式化嵌入回覆中

---

### 模組 7：時程管理與提醒

#### 功能點
- [ ] 手動新增任務與截止日期
- [ ] 根據案件狀態自動建立任務
- [ ] 任務提醒（前 1 天、前 3 天）
- [ ] 任務完成標記
- [ ] 日曆視圖（顯示所有案件時程）

#### 使用者故事
> **作為創作者**，我希望系統能在重要日期前提醒我，這樣我不會錯過交稿時間。

#### 自動任務範例
當案件狀態變更為「進行中」，並設定了交稿日期時：
- 自動建立「提交腳本」任務（交稿日前 7 天）
- 自動建立「初稿完成」任務（交稿日前 3 天）
- 自動建立「正式交稿」任務（交稿日當天）

#### 驗收標準
- 可以手動為案件新增任務
- 案件時程變更時，相關任務自動更新
- 提醒通知在前 1 天顯示（UI 通知 + Email）
- 日曆視圖清楚顯示所有任務
- 可以標記任務為完成

---

### 模組 8：通知與提醒

#### 功能點
- [ ] 瀏覽器通知（需要使用者授權）
- [ ] Email 通知
- [ ] 站內通知中心
- [ ] 通知偏好設定（哪些事件要通知）

#### 通知觸發事件
1. **新郵件同步**：收到新的合作邀約
2. **案件狀態變更**：案件進入下一階段
3. **任務提醒**：重要日期接近
4. **系統提示**：需要重新授權 Gmail 等

#### 使用者故事
> **作為創作者**，我希望在收到重要合作邀約時能立即收到通知。

#### 驗收標準
- 使用者可以選擇接收哪些類型的通知
- 瀏覽器通知顯示摘要資訊，點擊後跳轉到相關頁面
- Email 通知包含足夠資訊，不需要登入也能了解概況
- 站內通知中心顯示所有歷史通知
- 可以標記通知為已讀

---

### 模組 9：準確度追蹤與改善

#### 功能點
- [ ] 記錄 AI 判斷結果與使用者修正
- [ ] 顯示 AI 信心指標
- [ ] 準確度統計儀表板（管理者可見）
- [ ] 使用修正資料改善 prompt

#### 使用者故事
> **作為系統開發者**，我希望能了解 AI 的準確度，並持續改善。

#### 追蹤內容
- AI 分類 vs. 使用者修正的分類
- AI 抽取的資訊 vs. 使用者修正的資訊
- 信心指標與實際準確度的對應關係

#### 驗收標準
- 每次使用者修正 AI 結果時，系統記錄差異
- 管理介面顯示各類型的準確率
- 當準確率低於 80% 時，系統發出警告
- 可以匯出錯誤案例進行分析

---

## 🎨 使用者介面設計

### 頁面結構

#### 1. 登入頁
- Logo 與產品標語
- 「使用 Google 登入」按鈕
- 隱私政策與使用條款連結

#### 2. 儀表板（Dashboard）
- **頂部**：搜尋框、通知圖示、使用者頭像
- **左側導覽**：
  - 儀表板
  - 案件管理
  - 日曆
  - 合作方案
  - 設定
- **主區域**：
  - 待處理事項（新郵件、待回覆、即將到期）
  - 案件狀態摘要（進行中 X 件、本月完成 Y 件）
  - 最近更新的案件

#### 3. 案件列表頁
- **篩選**：狀態、日期範圍、品牌
- **排序**：最新更新、截止日期、金額
- **列表項目顯示**：
  - 案件名稱
  - 品牌
  - 狀態標籤
  - 報價金額
  - 下一個重要日期
  - 快速操作按鈕（查看、編輯）

#### 4. 案件詳情頁
- **頂部**：案件名稱、狀態、操作按鈕（編輯、刪除）
- **左側**：
  - 基本資訊（品牌、金額、類型）
  - 時程與任務
  - 相關文件
- **右側**：
  - 郵件時間軸（所有相關往來）
  - 快速回覆按鈕

#### 5. 回覆生成頁
- **輸入區**：選擇要回覆的郵件
- **補充資訊**：使用者額外輸入
- **生成結果**：可編輯的回覆草稿
- **操作**：重新生成、插入方案、寄送

#### 6. 日曆頁
- 月曆視圖
- 顯示所有任務與截止日期
- 點擊日期查看當天所有事項
- 支援拖曳調整日期

#### 7. 設定頁
- **帳號設定**：基本資料、頭像
- **Gmail 整合**：授權狀態、重新授權
- **AI 設定**：OpenAI API Key、回覆語氣偏好
- **通知偏好**：選擇接收哪些通知
- **合作方案**：管理報價方案

---

## 🏗️ 技術架構概述

### 技術棧

#### 前端
- **框架**：Vue 3 + Nuxt 3
- **UI 框架**：Vuetify 3 + Nuxt UI
- **狀態管理**：Pinia
- **HTTP 客戶端**：Axios / $fetch
- **語言**：TypeScript

#### 後端
- **語言**：Go 1.21+
- **Web 框架**：待確認（推薦 Gin 或 Fiber）
- **ORM**：GORM
- **資料庫**：PostgreSQL 15+
- **快取**：Redis（選用）
- **背景任務**：待確認（推薦 Asynq 或自建 worker）

#### 第三方服務
- **認證**：Google OAuth 2.0
- **郵件**：Gmail API
- **AI**：OpenAI GPT-4 API
- **部署**：待確認（建議 Docker + Kubernetes 或 Render）

### 系統架構圖
```
┌─────────────────┐
│  前端 (Nuxt)    │
│  - UI 組件      │
│  - 狀態管理     │
└────────┬────────┘
         │ HTTPS/REST
┌────────┴────────────────────┐
│  後端 (Go)                  │
│  ┌──────────────────────┐   │
│  │  API Gateway         │   │
│  └──────────┬───────────┘   │
│             │               │
│  ┌──────────┴───────────┐   │
│  │  業務邏輯層          │   │
│  │  - 案件管理          │   │
│  │  - 郵件同步          │   │
│  │  - AI 分析           │   │
│  │  - 回覆生成          │   │
│  └──────────┬───────────┘   │
│             │               │
│  ┌──────────┴───────────┐   │
│  │  資料存取層          │   │
│  └──────────┬───────────┘   │
└─────────────┼───────────────┘
              │
   ┌──────────┴──────────┐
   │                     │
┌──┴────┐          ┌─────┴─────┐
│ PostgreSQL│       │  Redis    │
│ (主資料庫)│       │  (快取)   │
└──────────┘        └───────────┘

外部服務：
- Gmail API
- OpenAI API
```

---

## 🔐 安全性考量

### 資料安全
- Gmail access token 加密儲存
- OpenAI API Key 加密儲存
- 敏感資料傳輸使用 HTTPS
- 資料庫連線使用 SSL

### 權限控制
- 使用者只能存取自己的資料
- API 端點需要身份驗證
- 實作 RBAC（未來支援多使用者時）

### 隱私保護
- 明確的隱私政策
- 使用者資料不分享給第三方（除非法律要求）
- 提供資料匯出與刪除功能
- Gmail 權限僅申請必要範圍

---

## 📊 效能需求

### 回應時間
- API 端點 P95 < 200ms
- AI 分析單封郵件 < 3 秒
- 頁面載入時間 < 2 秒

### 擴展性
- 支援單一使用者 10,000+ 封郵件
- 支援 1,000+ 並發使用者（未來）
- 資料庫查詢優化（適當索引）

### 可靠性
- 系統可用性 > 99.5%
- 自動錯誤恢復機制
- 完整的日誌記錄

---

## 🧪 測試策略

### 單元測試
- 後端業務邏輯覆蓋率 > 80%
- 前端組件測試覆蓋率 > 70%

### 整合測試
- Gmail API 整合測試（使用測試帳號）
- OpenAI API mock 測試
- 資料庫遷移測試

### E2E 測試
- 關鍵使用者流程（登入、建立案件、生成回覆）
- 使用 Playwright 或 Cypress

---

## 📅 開發里程碑

### Phase 1: 基礎架構（2 週）
- [ ] 專案初始化（前後端）
- [ ] 資料庫 schema 設計
- [ ] Google OAuth 登入
- [ ] 基本 UI 框架

### Phase 2: Gmail 整合（2 週）
- [ ] Gmail API 整合
- [ ] 郵件同步機制
- [ ] 郵件列表顯示

### Phase 3: AI 分析（2 週）
- [ ] OpenAI API 整合
- [ ] 郵件分類功能
- [ ] 資訊抽取功能

### Phase 4: 案件管理（2 週）
- [ ] 案件 CRUD
- [ ] 案件與郵件關聯
- [ ] 案件狀態管理

### Phase 5: 回覆生成（1 週）
- [ ] AI 回覆生成
- [ ] 回覆編輯與寄送

### Phase 6: 進階功能（2 週）
- [ ] 合作方案管理
- [ ] 時程管理
- [ ] 通知系統

### Phase 7: 測試與優化（1 週）
- [ ] 完整測試
- [ ] 效能優化
- [ ] Bug 修復

---

## ❓ Clarifications（需要釐清的問題）

### 功能範圍
- [ ] **問題 1**：是否需要支援多個 Gmail 帳號？
  - 現況：規格未明確說明
  - 影響：資料模型設計、UI 複雜度
  
- [ ] **問題 2**：AI 回覆生成後，是否需要支援「學習使用者風格」？
  - 現況：未提及個性化學習
  - 影響：是否需要儲存使用者歷史回覆作為訓練資料

- [ ] **問題 3**：案件是否需要支援「協作」功能（多人管理同一案件）？
  - 現況：假設是個人使用
  - 影響：權限系統設計

### 技術細節
- [ ] **問題 4**：Gmail 同步頻率是否可以由使用者自訂？
  - 現況：預設 5 分鐘
  - 影響：API 配額管理

- [ ] **問題 5**：OpenAI API 費用由誰承擔？使用者自己的 API Key 還是平台統一？
  - 現況：規格提到「OpenAI API Key 設定」
  - 影響：計費模式、成本控制

- [ ] **問題 6**：資料保留政策？郵件與案件資料保留多久？
  - 現況：未說明
  - 影響：資料庫容量規劃、隱私政策

### UI/UX
- [ ] **問題 7**：是否需要手機 App 或 RWD 即可？
  - 現況：未說明
  - 影響：開發工作量

- [ ] **問題 8**：是否需要暗色模式？
  - 現況：未說明
  - 影響：UI 設計工作量

---

## 📝 Review & Acceptance Checklist

### 規格完整性
- [ ] 明確定義目標使用者
- [ ] 清楚描述核心問題與解決方案
- [ ] 列出所有主要功能模組
- [ ] 每個功能都有使用者故事
- [ ] 定義成功指標

### 技術可行性
- [ ] 技術棧選擇合理
- [ ] 第三方 API 整合可行
- [ ] 安全性考量完整
- [ ] 效能需求明確

### 開發就緒
- [ ] 資料模型已定義（待下一步）
- [ ] API 規格已定義（待下一步）
- [ ] UI 設計已確認（待下一步）
- [ ] 開發里程碑合理

### 問題釐清
- [ ] 所有模糊需求已記錄在 Clarifications
- [ ] 關鍵技術決策需要確認

---

## 📎 附錄

### 參考資料
- Gmail API 文件：https://developers.google.com/gmail/api
- OpenAI API 文件：https://platform.openai.com/docs
- Google OAuth 2.0：https://developers.google.com/identity/protocols/oauth2

### 術語表
- **KOL**：Key Opinion Leader，關鍵意見領袖
- **業配**：業務配合，指付費的商業合作內容
- **交稿**：提交完成的作品給品牌方
- **限動**：Instagram 限時動態

---

**本規格文件將根據 Clarification 結果持續更新。**

