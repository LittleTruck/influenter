# Influenter Backend - 開發環境 Dockerfile
FROM golang:1.24-alpine

# 安裝必要工具
RUN apk add --no-cache git gcc musl-dev

# 設定工作目錄
WORKDIR /app

# 安裝 Air (hot reload 工具) - 使用相容版本
RUN go install github.com/air-verse/air@v1.52.3

# 複製 go.mod 和 go.sum
COPY go.mod go.sum ./

# 下載依賴
RUN go mod download

# 複製原始碼
COPY . .

# 暴露 API 埠
EXPOSE 8080

# 預設命令 (會被 docker-compose 覆蓋)
CMD ["air"]

